@{
    ViewData["Title"] = "Home Page";
}

<!-- banner -->
<section class="banner_main">
    <div id="banner1" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#banner1" data-slide-to="0" class="active"></li>
            <li data-target="#banner1" data-slide-to="1"></li>
            <li data-target="#banner1" data-slide-to="2"></li>
        </ol>

        <div class="container">
            <div class="carousel-caption">
                <div class="text-bg">
                    <h1> <span class="blu">Welcome <br></span>To Our SmartGlasses</h1>
                </div>
            </div>
        </div>

        <div class="carousel-inner">

            <div class="carousel-item active">
                <div class="container">
                    <div class="carousel-caption">
                        <div class="text-bg">
                            <figure><img class="carousel-image" src="/images/banner-1.jpeg" alt="banner-1" /></figure>
                            @*<a class="read_more" href="#">Shop Now</a>*@
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="container">
                    <div class="carousel-caption">
                        <div class="text-bg">
                            @*<h1> <span class="blu">Welcome <br></span>To Our SmartGlasses</h1>*@
                            <figure><img class="carousel-image" src="/images/banner-2.jpeg" alt="banner-2" /></figure>
                            @*<a class="read_more" href="#">Shop Now</a>*@
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="container">
                    <div class="carousel-caption">
                        <div class="text-bg">
                            @*<h1> <span class="blu">Welcome <br></span>To Our SmartGlasses</h1>*@
                            <figure><img class="carousel-image" src="/images/banner-3.jpeg" alt="banner-3" /></figure>
                            @*<a class="read_more" href="#">Shop Now</a>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#banner1" role="button" data-slide="prev">
            <i class="fa fa-arrow-left" aria-hidden="true"></i>
        </a>
        <a class="carousel-control-next" href="#banner1" role="button" data-slide="next">
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
        </a>
    </div>
</section>
<!-- end banner -->
<!-- about section -->
<div class="about">
    <div class="container">
        <div class="row d_flex">
            <div class="col-md-5">
                <div class="about_img">
                    <figure><img src="/images/about_img.png" alt="#" /></figure>
                </div>
            </div>
            <div class="col-md-7">
                <div class="titlepage">
                    <h2>About Our Shop</h2>
                    <p>
                        Welcome to our eyewear store, where style meets functionality and quality craftsmanship is paramount.
                        <br />
                        <br />

                        At our store, we pride ourselves on offering an extensive range of eyewear options to cater to every individual's unique style and vision needs. Whether you're searching for fashionable sunglasses to elevate your look or durable prescription glasses to enhance your vision, we have something for everyone.
                    </p>
                </div>
                <a class="read_more" asp-controller="About" asp-action="Index">Read More</a>
            </div>
        </div>
    </div>
</div>
<!-- end about section -->
<!-- Our Shop section -->
<div class="glasses">
    <div class="container">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <div class="titlepage">
                    <h2>Our Glasses</h2>
                    <p>
                        Explore our stylish eyewear collection, perfect for both fashion-forward individuals and those seeking functional vision solutions.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            @foreach (var product in ViewBag.Products)
            {
                var isFavorited = ViewBag.FavoriteProducts != null && ViewBag.FavoriteProducts.Contains(product.IdProduct);
                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
                    <div class="card w-100 my-2 shadow-2-strong">
                        <div class="card-conten-shop d-flex px-0 pb-0">
                            <!-- Thêm biểu tượng yêu thích -->
                            <a href="javascript:void(0)"
                               class="btn border icon-hover px-2 pt-2 add-to-favorite"
                               data-product-id="@product.IdProduct"
                               onclick="toggleFavorite(this)">
                                <i class="fa fa-heart fa-lg @(isFavorited ? "text-danger" : "text-secondary") px-1"></i>
                            </a>
                        </div>
                        <img src="@product.ImageUrl" class="card-img-top" />
                        <a asp-controller="Product" asp-action="Detail" asp-route-id="@product.IdProduct">
                            <div class="card-body d-flex flex-column">
                                <h3>@product.Price.ToString("N0")<span class="blu">đ</span></h3>
                                <p class="card-text text-truncate">@product.NameProduct</p>
                            </div>
                        </a>
                    </div>
                </div>
            }

            <div class="col-md-12">
                <a class="read_more" asp-controller="Product" asp-action="AllProducts">See More</a>
            </div>
        </div>
    </div>
</div>
<!-- end Our Shop section -->
<!-- Suitable section -->
<div id="about" class="shop">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-5">
                <div class="shop_img">
                    <figure><img src="/images/shop_img.png" alt="#" /></figure>
                </div>
            </div>
            <div class="col-md-7 padding_right0">
                <div class="max_width">
                    <div class="titlepage">
                        <h2>Choosing Glasses that Suit Your Face Shape</h2>
                        <p>Choosing the perfect pair of glasses is more than just a fashion statement; it's about finding frames that not only suit your style but also complement your facial features. Your face shape plays a crucial role in determining which frames will look best on you. Whether you have a round, square, oval, heart-shaped, or diamond-shaped face, there are frames designed to enhance your natural contours and bring out your unique beauty. Experiment with different styles, shapes, and colors until you find the perfect match that not only helps you see better but also makes you look and feel your best.</p>
                        <a class="read_more" asp-controller="Suitable" asp-action="Index">See More</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end Suitable section -->

<!-- contact section -->
<div id="contact" class="contact">
    <div class="container-fluid">
        <div class="map_section">
            <div class="map">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3918.4206985418705!2d106.78253487570396!3d10.855572157727538!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3175276e7ea103df%3A0xb6cf10bb7d719327!2zSFVURUNIIC0gxJDhuqFpIGjhu41jIEPDtG5nIG5naOG7hyBUUC5IQ00gKFRodSBEdWMgQ2FtcHVzKQ!5e0!3m2!1svi!2s!4v1710172843840!5m2!1svi!2s" width="100%" height="500" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleFavorite(element) {
        var productId = $(element).data("product-id");

        // Gửi yêu cầu AJAX để thêm hoặc xóa sản phẩm khỏi danh sách yêu thích
        $.ajax({
            url: '/Favourite/Toggle', // Gọi đến action Toggle
            type: 'POST',
            data: { productId: productId },
            success: function (response) {
                if (response.success) {
                    // Nếu thành công, thay đổi màu sắc biểu tượng
                    var icon = $(element).find("i");
                    if (response.isFavorited) {
                        icon.removeClass("text-secondary").addClass("text-danger"); // Đã yêu thích
                    } else {
                        icon.removeClass("text-danger").addClass("text-secondary"); // Bỏ yêu thích
                    }

                    // Hiển thị thông báo thành công bằng SweetAlert2
                    Swal.fire({
                        title: 'Thành công!',
                        text: response.message,
                        icon: 'success',
                        confirmButtonText: 'OK'
                    });
                } else {
                    // Hiển thị thông báo lỗi bằng SweetAlert2
                    Swal.fire({
                        title: 'Lỗi!',
                        text: response.message,
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                }
            },
            error: function () {
                // Hiển thị thông báo lỗi nếu xảy ra lỗi trong quá trình AJAX
                Swal.fire({
                    title: 'Lỗi!',
                    text: 'Đã xảy ra lỗi trong quá trình cập nhật trạng thái yêu thích.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }
        });
    }
</script>